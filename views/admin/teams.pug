extends ../layout.pug

block body
    h2(class="text-2xl font-semibold mb-4") Manage teams

    if currentLan.seatPickerCode
        div(class="flex")
            form(action=`/admin/teams/randomise` method="post" class="mb-3 mr-2")
                input(type="hidden" name="csrf" value=csrfToken)
                input(type="submit" name="submit" value="Randomise" class="py-1.5 px-3 rounded-md border border-border/80 bg-highlight")

            form(action=`/admin/teams/sync-groups` method="post" class="mb-3")
                input(type="hidden" name="csrf" value=csrfToken)
                input(type="submit" name="submit" value="Update groups" class="py-1.5 px-3 rounded-md border border-border/80 bg-highlight")


    div(class="grid grid-cols-[repeat(3,max)]")
        div(class="grid grid-cols-subgrid col-span-3 font-bold")
            span(class="px-3 py-2 self-center") Name
            span(class="px-3 py-2 self-center") Groups
            span(class="px-3 py-2 self-center") Team

        each listUser of users
            div(class="grid grid-cols-subgrid col-span-3 hover:bg-highlight border-t border-border/50")
                span(class="px-3 py-2 self-center")=helpers.formatName(listUser)
                span(class="px-3 py-2 self-center")
                    each group of listUser.groups
                        span(class="inline-block px-1.5 py-1 mr-2 rounded-lg bg-highlight/60 border border-highlight-accent")
                            =group.name
                span(class="px-3 py-2 self-center")
                    if listUser.team
                        span(class=`inline-block px-1.5 py-1 rounded-lg ${helpers.getTeamBackground(listUser.team)}`)
                            =listUser.team.name
